<!doctype html>
<html>
  <head>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!-- Custom Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>{% block title %}{% endblock %}</title>
    <style>
     
    </style>
  </head>
  <body>
    <nav>
      <div class="nav-bar">
        <!-- Search Box -->
        <div class="search-box rectangle">
          <img src="{{ url_for('static', filename='images/Search.png') }}" class="search-icon">
          <div class="search-text">Search....</div>
        </div>
    
        <!-- Navigation Links -->
        <div class="nav-links">
          <a href="/" class="nav-item">Home</a>
          <a href="/daily-recipes" class="nav-item">Daily Recipes</a>
          <a href="/my-recipes" class="nav-item">My Recipes</a>
          <a href="/my-ingredients" class="nav-item active">My Ingredients</a>
          
          {% if is_authenticated %}
            <!--<a href="/add-recipe" class="nav-item add-recipe-btn">Add Recipe</a>-->
            <a href="/logout" class="nav-item login-btn rectangle">Logout</a>
          {% else %}
            <div class="login-form-container">
              <form class="navbar-form" method="POST" action="/login">
                <div class="input-field">
                  <input placeholder="username" name="username" type="text" class="validate" required>
                </div>
                <div class="input-field">
                  <input placeholder="password" name="password" type="password" class="validate" required>
                </div>
                <button type="submit" class="login-btn rectangle">Login</button>
              </form>
            </div>
          {% endif %}
        </div>
      </div>
    </nav>

    <div class="container" id="content">
      {% block content %}{% endblock %}
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
      M.AutoInit();

      {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
            M.toast({html: '{{message}}'})
            {% endfor %}
        {% endif %}
      {% endwith %}
      
      // Dynamic ingredient adding
      document.addEventListener('DOMContentLoaded', function() {
        // Add ingredient row
        document.getElementById('add-ingredient-btn')?.addEventListener('click', function() {
          const container = document.getElementById('ingredients-container');
          const template = document.querySelector('.ingredient-row.template');
          const newRow = template.cloneNode(true);
          newRow.classList.remove('template');
          newRow.style.display = 'flex';
          container.appendChild(newRow);
        });
        
        // Remove ingredient row
        document.addEventListener('click', function(e) {
          if (e.target.classList.contains('remove-ingredient')) {
            const rows = document.querySelectorAll('.ingredient-row:not(.template)');
            if (rows.length > 1) {
              e.target.closest('.ingredient-row').remove();
            }
          }
        });
      });
    </script>
  </body>
</html>